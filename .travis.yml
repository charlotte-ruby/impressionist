language: ruby
env:
  - BUNDLER_VERSION=1.17.3
before_install:
  - gem install bundler --version $BUNDLER_VERSION
before_script:
  - cd tests/test_app
  - bundle _${BUNDLER_VERSION}_
  - bundle _${BUNDLER_VERSION}_ exec rails g impressionist -f
  - bundle _${BUNDLER_VERSION}_ exec rake db:create db:migrate RAILS_ENV=test
  - cd ../..
script:
  - bundle _${BUNDLER_VERSION}_ exec rspec spec
  - cd tests/test_app
  - bundle _${BUNDLER_VERSION}_ exec rspec spec
rvm:
  - 2.7.0
  - jruby-head
  - rbx
  - ruby-head
gemfile:
  - gemfiles/rails32.gemfile
  - gemfiles/rails40.gemfile
matrix:
  allow_failures:
    - rvm: jruby-head
    - rvm: rbx
    - rvm: ruby-head
  fast_finish: true
notifications:
  email:
    #- acnalesso@yahoo.co.uk
    #- john@couponshack.com
    - mmcmahand@gmail.com
